$(function(){$(".scene, .scene-wrapper, .fallingitems, #falling-objects, #princessroom, #screamface, #princetower, #text, .button, #princecrying").hide();$.fn.scroll=function(e){$("html, body").stop().animate({scrollTop:$(this.attr("href")).offset().top},e);event.preventDefault()};$.fn.fallingItems=function(e,t){this.fadeIn();this.animate({top:"90%"},e,t)};$.fn.pulse=function(){$(this).animate({opacity:"0"},800,function(){$(this).animate({opacity:"1"},800);$(this).pulse()})};$.fn.replaceText=function(e,t){this.delay(e).queue(function(e){$(this).text(t);e()})};$.fn.addText=function(e,t){this.delay(e).queue(function(e){$(this).append(t);e()})};var e=$("#text>div");$("#scene1-action").show().pulse();$("#maid-title").draggable();$("#maid-title").on("mousedown",function(){$("#maidscream-audio").get(0).play()});$("#scene1-action").bind("click",function(){var e=$(this);$("#scene2-action").delay(5e3).fadeIn(1e3).pulse();$("#text").fadeIn(2500);$("#scene1-wrapper, #scene1").show();$("#prince-horse").show().delay(4e3).animate({right:"1100px"},5e3,function(){$(this).delay(1e4).animate({right:"+=2000px"},8e3)});$("#princessroom").show().delay(8e3).animate({left:"1100px"},5e3,function(){$(this).delay(3e3).animate({left:"0"},9e3)});$("#screamface").delay(13500).fadeIn(2e3);$("#screamface").delay(500).animate({marginLeft:"-1000px"},9e3);$("#scene1-action").scroll(2e3);$("#scene1-audio").get(0).play();$("#title-wrapper, #title-scene").fadeOut(2e3)});$("#scene2-action").bind("click",function(){e.replaceText(200,"Alas she was too far away to quite make out what he would say.");e.addText(4e3,'<p>"Rapunzel, Rapunzel throw down your hair". She thought he said your underwear.</p>');e.addText(6e3,'<p>"No Rapunzel your curly locks". Rapunzel threw down her dirty socks.</p>');e.replaceText(6e3,'"Rapunzel, do you have a rope?". Rapunzel dropped a cantaloupe.');e.addText(4e3,'<p>It burst in pieces by his side. "Oh, bad catch!" Rapunzel cried.</p>');e.addText(7e3,'<p>"Perhaps" he sighed "This is a test", and bound by love he did not rest.</p>');e.replaceText(7500,'"Okay Rapunzel, how about twine?" She heaved out her blue ribbon swine.');$("#scene2-1-wrapper, #scene2-1, #falling-objects, #scene2-2-wrapper, #scene2-2, #scene2-3-wrapper, #scene2-3, #princetower").show();$("#scene3-action").delay(5e3).fadeIn(1e3).pulse();$("#scene2-action").scroll(7e3);$("#scene2-audio").get(0).play();$("#underwear1").delay(8e3).fallingItems(4e3);$("#underwear3").delay(8500).fallingItems(4e3,function(){$("#sock1").fallingItems(4e3);$("#sock2").delay(500).fallingItems(4e3);$("#sock3").delay(1e3).fallingItems(4e3,function(){$("#cantaloupe").fallingItems(4e3,function(){$(this).hide();$("#cantaloupe4").fadeIn(100,function(){$("#cantaloupe4").fadeOut(100);$("#cantaloupe3").fadeIn(100,function(){$("#cantaloupe3").fadeOut(100)})});$("#pig").delay(13500).fallingItems(4e3)})})});$("#scene1, #scene1-wrapper").delay(7e3).fadeOut(2e3)});$("#scene3-action").bind("click",function(){$(".fallingitems, #princetower").fadeOut(2e3);$("#princecrying").fadeIn(1e3,function(){$("#scene3-audio").get(0).play();e.replaceText(200,"At this the poor prince had a cry then cupped his hands for one last try.");e.addText(7e3,'<p>"Rapunzel, Rapunzel let down your braid". Confused Rapunzel pushed out her maid.</p>')});setTimeout("$('#scene3-wrapper, #scene3').show()",8e3);setTimeout("$('#scene3-action').scroll(2000)",15e3);$("#maidfalling").delay(17e3).animate({height:"800%",width:"auto",top:"-400%",left:"-150%"},5e3,function(){$(this).fadeOut(500);$("#scene3").css({backgroundColor:"white"})});$("#scene4-action").delay(15e3).fadeIn(1e3).pulse();$("#scene2-1, #scene2-1-wrapper, #scene2-wrapper, #scene2, #scene2-2-wrapper, #scene2-2, #scene2-3, #scene2-3-wrapper, .fallingitems").delay(2e4).fadeOut(2e3)});$("#scene4-action").bind("click",function(){$("#scene5-action").delay(5e3).fadeIn(1e3).pulse();$("#scene4-wrapper").show();$("#scene4").show();$("#scene4-audio").get(0).play();e.replaceText(200,"The maid fell squarely on the prince quite pleased with the coincidence.");e.addText(4e3,'<p>Then smiling said, "For what its worth Im really down to earth."');e.addText(4600,"His young heart thrilled and he gave a hoot for what was more the maid was cute.");$("#scene4-action").scroll(2e3);$("#scene3-wrapper, #scene3").fadeOut(2e3)});$("#scene5-action").bind("click",function(){$("#scene5-wrapper").show();$("#scene5").show();$("#scene5-audio").get(0).play();e.replaceText(200,"Rapunzel watched them ride from sight I'm glad I finally heard them right");e.addText(3e3,'<p>"I hope if they come back for more theyll think to knock at my back door"</p>');e.addText(5e3,"<p>The maid leaned close so he could hear she whispered something in his ear</p>");e.replaceText(6500,'"I fell for you when we first met", he nodded, "how could I forget"');e.replaceText(6700,"");$("#text img").delay(6700).queue(function(){$(this).attr("src","http://a13pixie12.keaweb.dk/img/theend.png");$(this).pulse()});var t=function(){var e=$('<img class="hearts" src="http://a13pixie12.keaweb.dk/img/hearts.png" alt="last scene">'),t=Math.random()*100+"%",n=Math.random()*100+"%";e.css({left:n,top:t,position:"absolute"});$("#scene5").append(e)};$("#scene5").click(t);$("#scene5-action").scroll(2e3);$("#end-button").delay(23e3).fadeIn().pulse();$("#scene4-wrapper, #scene4").fadeOut(2e3)});$("#end-button").click(function(){event.preventDefault();window.location.reload()})});